import React from 'react';
import { Link } from 'react-router-dom';
import { useGame } from '../../contexts/GameContext';

const VulnerabilityPanel = () => {
  const { vulnerabilities, flags } = useGame();

  const getCompletedCount = (vulnType) => {
    return flags.filter(flag => flag.vulnerability === vulnType).length;
  };

  const vulnerabilityTypes = [
    {
      name: 'SQL Injection',
      path: '/sql-injection',
      icon: '',
      description: 'Inyecci贸n de c贸digo SQL malicioso',
      color: 'red',
      completed: getCompletedCount('sql_injection')
    },
    {
      name: 'IDOR',
      path: '/idor',
      icon: '',
      description: 'Acceso indebido a objetos',
      color: 'blue',
      completed: getCompletedCount('idor')
    },
    {
      name: 'Information Disclosure',
      path: '/info-disclosure',
      icon: '',
      description: 'Exposici贸n de informaci贸n sensible',
      color: 'purple',
      completed: getCompletedCount('information_disclosure')
    },
    {
      name: 'Weak Authentication',
      path: '/weak-auth',
      icon: '',
      description: 'Autenticaci贸n d茅bil o bypass',
      color: 'orange',
      completed: getCompletedCount('weak_authentication')
    }
  ];

  return (
    <div className="bg-white rounded-3xl shadow-xl p-6 mb-8">
      <h2 className="text-2xl font-bold text-gray-800 mb-6">Laboratorio de Vulnerabilidades</h2>
      
      <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        {vulnerabilityTypes.map((vuln, index) => (
          <Link
            key={index}
            to={vuln.path}
            className={`bg-gradient-to-br from-${vuln.color}-50 to-${vuln.color}-100 rounded-2xl p-6 border-2 border-transparent hover:border-${vuln.color}-300 transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl`}
          >
            <div className="text-center">
              <div className="text-4xl mb-3">{vuln.icon}</div>
              <h3 className="font-bold text-gray-800 mb-2">{vuln.name}</h3>
              <p className="text-sm text-gray-600 mb-3">{vuln.description}</p>
              
              <div className="flex items-center justify-center space-x-2">
                <div className={`w-2 h-2 rounded-full ${
                  vuln.completed > 0 ? 'bg-green-500' : 'bg-gray-300'
                }`}></div>
                <span className="text-xs text-gray-500">
                  {vuln.completed > 0 ? 'Completada' : 'Por descubrir'}
                </span>
              </div>
            </div>
          </Link>
        ))}
      </div>
    </div>
  );
};

export default VulnerabilityPanel;